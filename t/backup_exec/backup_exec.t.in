#!/usr/bin/perl

use strict;
use Test::More tests => 2;

# Ensure passing behavior
system("@PERL@ ./rsnapshot -c t/backup_exec/conf/backup_exec.conf hourly");
# Shift bits 8 places to get the Unix return code
my $rc = $? >> 8;
ok($rc == 2);

# Ensure failing behavior
system("@PERL@ ./rsnapshot -c t/backup_exec/conf/backup_exec_fail.conf hourly");
$rc = $? >> 8;
ok($rc == 1);
